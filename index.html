<!DOCTYPE html>
<html>
    <head>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0/handlebars.js"></script>
        <meta charset="utf-8">
        <title>Aura</title>
    </head>
    <body>
    

	<div class="row">
		<div class="col-md-8">
			<div style="border:1px solid tomato">
				<div>
					<h2>Dependencies Table</h2>
					<hr />
				</div>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>Component</th>
							<th>Dependencies</th>
							<th>Count</th>
						</tr>
					</thead>
					<tbody id="tblContentDep"></tbody>
				</table>
			</div>
		</div>
		<div class="col-md-4">
			<div style="border:1px solid purple">
				<div>
					<h2>Usage Table</h2>
					<hr />
				</div>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>Component</th>
							<th>Usage</th>
						</tr>
					</thead>
					<tbody id="tblUsage"></tbody>
				</table>
			</div>
		</div>
	</div>


	<script id="tmplContentDepRow" type="text/x-handlebars-template">
	<tr>
		<td>{{cmp}}</td>
		<td>{{cmpDep}}</td>
		<td>{{count}}</td>
	</tr>
	</script>


	<script id="tmplUsageRow" type="text/x-handlebars-template">
	<tr>
		<td>{{cmp}}</td>
		<td>{{count}}</td>
	</tr>
	</script>

    <script>
    $.get('./mappings.orig.json', function(r){
    	var source   = $("#tmplContentDepRow").html();
    	var template = Handlebars.compile(source);
    	var body = $('#tblContentDep');

    	for (var k in r){
    		var compName = k;
    		for (var compDep in r[k]){
    			body.append(template({
    				cmp: compName,
    				cmpDep: compDep,
    				count : r[k][compDep]
    			}));
    		}
    	}
    });

    $.get('./mappings.reverse.json', function(r){
    	var source   = $("#tmplUsageRow").html();
    	var template = Handlebars.compile(source);
    	var body = $('#tblUsage');

    	for (var k in r){
    		var compName = k;
    		body.append(template({
				cmp: compName,
				count : r[k]
			}));
    	}
    });
    </script>
</body>
</html>